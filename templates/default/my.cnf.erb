;
; /etc/mysql/my.cnf
;
; Generated by Chef for <%= node[:fqdn] %>
;

[client]
port                                    = <%= node['percona']['client']['port'] %>
socket                                  = <%= node['percona']['client']['socket'] %>
loose-default-character-set             = <%= node['percona']['client']['loose-default-character-set'] %>
user                                    = <%= node['percona']['mysql']['user'] %>
password                                = <%= node['percona']['mysql']['password'] %>

[mysql]
max_allowed_packet                      = <%= node['percona']['mysql']['max_allowed_packet'] %>
prompt                                  = "[<%= node[:hostname] %>] \d > "

[mysqldump]
max_allowed_packet                      = <%= node['percona']['mysqldump']['max_allowed_packet'] %>
loose-innodb-optimize-keys

[mysqld]
port                                    = <%= node['percona']['mysqld']['port'] %>
user                                    = <%= node['percona']['mysqld']['user'] %>
basedir                                 = <%= node['percona']['mysqld']['basedir'] %>
datadir                                 = <%= node['percona']['mysqld']['datadir'] %>
plugin-dir                              = <%= node['percona']['mysqld']['plugin-dir'] %>
pid-file                                = <%= node['percona']['mysqld']['pid-file'] %>
socket                                  = <%= node['percona']['mysqld']['socket'] %>

log-error                               = <%= node['percona']['mysqld']['log-error'] %>

slow-query-log
slow-query-log-file                     = <%= node['percona']['mysqld']['slow-query-log-file'] %>
character-set-server                    = <%= node['percona']['mysqld']['character-set-server'] %>
skip_name_resolve                       = <%= node['percona']['mysqld']['skip_name_resolve'] %>
skip-external-locking


key_buffer_size                         = <%= node['percona']['mysqld']['key_buffer_size'] %>
delay_key_write                         = <%= node['percona']['mysqld']['delay_key_write'] %>
max_allowed_packet                      = <%= node['percona']['mysqld']['max_allowed_packet'] %>
thread_cache_size                       = <%= node['percona']['mysqld']['thread_cache_size'] %>
table_open_cache                        = <%= node['percona']['mysqld']['table_open_cache'] %>
table_definition_cache                  = <%= node['percona']['mysqld']['table_definition_cache'] %>

wait_timeout                            = <%= node['percona']['mysqld']['wait_timeout'] %>
interactive_timeout                     = <%= node['percona']['mysqld']['interactive_timeout'] %>
net_read_timeout                        = <%= node['percona']['mysqld']['net_read_timeout'] %>
net_write_timeout                       = <%= node['percona']['mysqld']['net_write_timeout'] %>
long_query_time                         = <%= node['percona']['mysqld']['long_query_time'] %>

query_cache_type                        = <%= node['percona']['mysqld']['query_cache_type'] %>
query_cache_size                        = <%= node['percona']['mysqld']['query_cache_size'] %>
query_cache_limit                       = <%= node['percona']['mysqld']['query_cache_limit'] %>

server-id                               = <%= node['percona']['mysqld']['server-id'] %>

log_bin                                 = <%= node['percona']['mysqld']['log_bin'] %>
log_slave_updates
binlog-ignore-db                        = <%= node['percona']['mysqld']['binlog-ignore-db'] %>
binlog_format                           = <%= node['percona']['mysqld']['binlog_format'] %>
max_binlog_size                         = <%= node['percona']['mysqld']['max_binlog_size'] %>
expire_logs_days                        = <%= node['percona']['mysqld']['expire_logs_days'] %>
loose-innodb_api_enable_binlog
loose-innodb_recovery_update_relay_log

<% node['percona']['mysqld']['replicate-ignore-db'].each do |db| %>
replicate-ignore-db                     = <%= db %>
<% end %>

read_only                               = <%= node['percona']['mysqld']['read_only'] %>

tmpdir                                  = <%= node['percona']['mysqld']['tmpdir'] %>
max_connections                         = <%= node['percona']['mysqld']['max_connections'] %>
max_connect_errors                      = <%= node['percona']['mysqld']['max_connect_errors'] %>
open_files_limit                        = <%= node['percona']['mysqld']['open_files_limit'] %>

max_heap_table_size                     = <%= node['percona']['mysqld']['max_heap_table_size'] %>
sort_buffer_size                        = <%= node['percona']['mysqld']['sort_buffer_size'] %>
join_buffer_size                        = <%= node['percona']['mysqld']['join_buffer_size'] %>
tmp_table_size                          = <%= node['percona']['mysqld']['tmp_table_size'] %>

innodb_buffer_pool_size                 = <%= node['percona']['mysqld']['innodb_buffer_pool_size'] %>
innodb_data_file_path                   = <%= node['percona']['mysqld']['innodb_data_file_path'] %>
innodb_buffer_pool_instances            = <%= node['percona']['mysqld']['innodb_buffer_pool_instances'] %>
innodb_thread_concurrency               = <%= node['percona']['mysqld']['innodb_thread_concurrency'] %>
innodb_flush_log_at_trx_commit          = <%= node['percona']['mysqld']['innodb_flush_log_at_trx_commit'] %>
innodb_additional_mem_pool_size         = <%= node['percona']['mysqld']['innodb_additional_mem_pool_size'] %>
innodb_log_buffer_size                  = <%= node['percona']['mysqld']['innodb_log_buffer_size'] %>
innodb_log_file_size                    = <%= node['percona']['mysqld']['innodb_log_file_size'] %>
innodb_log_files_in_group               = <%= node['percona']['mysqld']['innodb_log_files_in_group'] %>
innodb_lock_wait_timeout                = <%= node['percona']['mysqld']['innodb_lock_wait_timeout'] %>
innodb_file_format                      = <%= node['percona']['mysqld']['innodb_file_format'] %>
innodb_file_per_table                   = <%= node['percona']['mysqld']['innodb_file_per_table'] %>
innodb_read_io_threads                  = <%= node['percona']['mysqld']['innodb_read_io_threads'] %>
innodb_write_io_threads                 = <%= node['percona']['mysqld']['innodb_write_io_threads'] %>
loose-innodb-kill-idle-transaction      = <%= node['percona']['mysqld']['loose-innodb-kill-idle-transaction'] %>
loose-innodb-buffer-pool-populate

transaction-isolation                   = <%= node['percona']['mysqld']['transaction-isolation'] %>
auto_increment_increment                = <%= node['percona']['mysqld']['auto_increment_increment'] %>
auto_increment_offset                   = <%= node['percona']['mysqld']['auto_increment_offset'] %>
log_warnings                            = <%= node['percona']['mysqld']['log_warnings'] %>
